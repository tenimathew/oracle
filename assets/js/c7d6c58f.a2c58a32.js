"use strict";(self.webpackChunkoracle=self.webpackChunkoracle||[]).push([[209],{3905:function(e,n,a){a.d(n,{Zo:function(){return u},kt:function(){return d}});var t=a(7294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function l(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function i(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?l(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function o(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},l=Object.keys(e);for(t=0;t<l.length;t++)a=l[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)a=l[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=t.createContext({}),c=function(e){var n=t.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):i(i({},n),e)),a},u=function(e){var n=c(e.components);return t.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),m=c(a),d=r,N=m["".concat(s,".").concat(d)]||m[d]||p[d]||l;return a?t.createElement(N,i(i({ref:n},u),{},{components:a})):t.createElement(N,i({ref:n},u))}));function d(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var c=2;c<l;c++)i[c]=a[c];return t.createElement.apply(null,i)}return t.createElement.apply(null,a)}m.displayName="MDXCreateElement"},6326:function(e,n,a){a.r(n),a.d(n,{assets:function(){return u},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return p}});var t=a(7462),r=a(3366),l=(a(7294),a(3905)),i=["components"],o={id:"Section 12. Constraints",sidebar_position:12,description:"PRIMARY KEY, FOREIGN KEY, UNIQUE, CHECK"},s=void 0,c={unversionedId:"oracle-basics/Section 12. Constraints",id:"oracle-basics/Section 12. Constraints",title:"Section 12. Constraints",description:"PRIMARY KEY, FOREIGN KEY, UNIQUE, CHECK",source:"@site/docs/oracle-basics/constraints.md",sourceDirName:"oracle-basics",slug:"/oracle-basics/Section 12. Constraints",permalink:"/oracle/oracle-basics/Section 12. Constraints",draft:!1,tags:[],version:"current",sidebarPosition:12,frontMatter:{id:"Section 12. Constraints",sidebar_position:12,description:"PRIMARY KEY, FOREIGN KEY, UNIQUE, CHECK"},sidebar:"tutorialSidebar",previous:{title:"Section 10. Data definition",permalink:"/oracle/oracle-basics/Section 10. Data definition"},next:{title:"Tutorial - Basics",permalink:"/oracle/category/tutorial---basics"}},u={},p=[{value:"PRIMARY KEY",id:"primary-key",level:2},{value:"Creating a primary key that consists of one column",id:"creating-a-primary-key-that-consists-of-one-column",level:3},{value:"Creating a primary key that consists of multiple columns",id:"creating-a-primary-key-that-consists-of-multiple-columns",level:3},{value:"Adding a primary key to a table",id:"adding-a-primary-key-to-a-table",level:3},{value:"Dropping an Oracle PRIMARY KEY constraint",id:"dropping-an-oracle-primary-key-constraint",level:3},{value:"Enable / Disable an Oracle PRIMARY KEY constraint",id:"enable--disable-an-oracle-primary-key-constraint",level:3},{value:"Disable",id:"disable",level:4},{value:"Enable",id:"enable",level:4},{value:"FOREIGN KEY",id:"foreign-key",level:2},{value:"Add a foreign key constraint to a table",id:"add-a-foreign-key-constraint-to-a-table",level:3},{value:"Drop a foreign key constraint",id:"drop-a-foreign-key-constraint",level:3},{value:"Disable a foreign key constraint",id:"disable-a-foreign-key-constraint",level:3},{value:"Enable a foreign constraint",id:"enable-a-foreign-constraint",level:3},{value:"NOT NULL constraint",id:"not-null-constraint",level:2},{value:"CHECK constraint",id:"check-constraint",level:2},{value:"Creating Oracle Check",id:"creating-oracle-check",level:3},{value:"Add Check constraint to a table",id:"add-check-constraint-to-a-table",level:3},{value:"Drop checking constraint",id:"drop-checking-constraint",level:3},{value:"Disable / Enable check constraint",id:"disable--enable-check-constraint",level:3},{value:"Restrictions of Oracle check constraint",id:"restrictions-of-oracle-check-constraint",level:3},{value:"UNIQUE constraint",id:"unique-constraint",level:2}],m={toc:p};function d(e){var n=e.components,a=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,t.Z)({},m,a,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"primary-key"},"PRIMARY KEY"),(0,l.kt)("p",null,"A primary key is a column of a combination of columns in a table that uniquely identifies a row in the table."),(0,l.kt)("p",null,"The following are rules that make a column a primary key:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"A primary key column cannot contain a NULL value or an empty string."),(0,l.kt)("li",{parentName:"ul"},"A primary key value must be unique within the entire table."),(0,l.kt)("li",{parentName:"ul"},"A primary key value should not be changed over time.")),(0,l.kt)("p",null,"According to these rules, the following are the recommendations for the primary keys:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"First, the primary key should be meaningless. Sometimes, you may want use meaningful data, which considers being unique, for the primary keys e.g., social security number (SSN), vehicle identification number (VIN), email, and phone number. However, you don\u2019t know when the email or phone number changes or is reused by another person. In such cases, it will create many data problems. In the database world, the artificial keys are known as surrogate keys which are as opposed to natural primary keys."),(0,l.kt)("li",{parentName:"ul"},"Second, the primary keys should be compact. The primary keys typically are numeric because Oracle typically processes numbers faster than any other data types."),(0,l.kt)("li",{parentName:"ul"},"It is considered a best practice have a primary key in every table though it is not mandatory in Oracle.")),(0,l.kt)("h3",{id:"creating-a-primary-key-that-consists-of-one-column"},"Creating a primary key that consists of one column"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE purchase_orders (\n    po_nr NUMBER PRIMARY KEY,\n    vendor_id NUMBER NOT NULL,\n    po_status NUMBER(1,0) NOT NULL,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL\n);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE purchase_orders (\n    po_nr NUMBER,\n    vendor_id NUMBER NOT NULL,\n    po_status NUMBER(1,0) NOT NULL,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL,\n    CONSTRAINT pk_purchase_orders PRIMARY KEY(po_nr)\n);\n")),(0,l.kt)("h3",{id:"creating-a-primary-key-that-consists-of-multiple-columns"},"Creating a primary key that consists of multiple columns"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE purchase_order_items (\n    po_nr NUMBER NOT NULL,\n    item_nr NUMBER NOT NULL,\n    product_id NUMBER NOT NULL,\n    quantity NUMBER NOT NULL,\n    purchase_unit NUMBER NOT NULL,\n    buy_price NUMBER (9,2) NOT NULL,\n    delivery_date DATE,\n    PRIMARY KEY (po_nr, item_nr)\n);\n")),(0,l.kt)("p",null,"In this example we did not use the ",(0,l.kt)("inlineCode",{parentName:"p"},"CONSTRAINT")," clause to explicitly assign the ",(0,l.kt)("inlineCode",{parentName:"p"},"PRIMARY KEY")," constraint a name. Therefore, Oracle implicitly assigned the primary key constraint a system-generated name such as ",(0,l.kt)("inlineCode",{parentName:"p"},"SYS_C0010617"),"."),(0,l.kt)("h3",{id:"adding-a-primary-key-to-a-table"},"Adding a primary key to a table"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE vendors (\n    vendor_id NUMBER,\n    vendor_name VARCHAR2(255) NOT NULL,\n    address VARCHAR2(255) NOT NULL\n);\n\nALTER TABLE vendors\nADD CONSTRAINT pk_vendors PRIMARY KEY (vendor_id);\n")),(0,l.kt)("h3",{id:"dropping-an-oracle-primary-key-constraint"},"Dropping an Oracle PRIMARY KEY constraint"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE vendors\nDROP CONSTRAINT pk_vendors;\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE vendors\nDROP PRIMARY KEY;\n")),(0,l.kt)("h3",{id:"enable--disable-an-oracle-primary-key-constraint"},"Enable / Disable an Oracle PRIMARY KEY constraint"),(0,l.kt)("h4",{id:"disable"},"Disable"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE purchase_orders\nDISABLE CONSTRAINT pk_purchase_orders;\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE purchase_orders\nDISABLE PRIMARY KEY;\n")),(0,l.kt)("h4",{id:"enable"},"Enable"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE purchase_orders\nENABLE CONSTRAINT pk_purchase_orders;\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE purchase_orders\nENABLE PRIMARY KEY;\n")),(0,l.kt)("h2",{id:"foreign-key"},"FOREIGN KEY"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE child_table (\n    ...\n    CONSTRAINT fk_name\n    FOREIGN KEY(col1, col2,...) REFERENCES parent_table(col1,col2)\n    ON DELETE [ CASCADE | SET NULL ]\n);\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"First, to explicitly assign the foreign key constraint a name, you use the ",(0,l.kt)("inlineCode",{parentName:"p"},"CONSTRAINT")," clause followed by the name. The ",(0,l.kt)("inlineCode",{parentName:"p"},"CONSTRAINT")," clause is optional. If you omit it, Oracle will assign a system-generated name to the foreign key constraint.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Second, specify the ",(0,l.kt)("inlineCode",{parentName:"p"},"FOREIGN KEY")," clause to defines one or more column as a foreign key and parent table with columns to which the foreign key columns reference."))),(0,l.kt)("p",null,"Third, use the ",(0,l.kt)("inlineCode",{parentName:"p"},"ON DELETE")," clause to specify consequence when the rows in the parent table are deleted."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"ON DELETE CASCADE:")," if a row in the parent is deleted, then all the rows in the child table that reference the removed row will be deleted."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"ON DELETE SET NULL:")," if a row in the parent is deleted, then all the rows in the child table reference the removed row will be set to NULL for the foreign key columns.")),(0,l.kt)("p",null,"Unlike the primary key constraint, a table may have more than one foreign key constraint."),(0,l.kt)("h3",{id:"add-a-foreign-key-constraint-to-a-table"},"Add a foreign key constraint to a table"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE child_table\nADD CONSTRAINT fk_name\nFOREIGN KEY (col1,col2) REFERENCES parent_table(col1,col2);\n")),(0,l.kt)("h3",{id:"drop-a-foreign-key-constraint"},"Drop a foreign key constraint"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE child_table\nDROP CONSTRAINT fk_name;\n")),(0,l.kt)("h3",{id:"disable-a-foreign-key-constraint"},"Disable a foreign key constraint"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE child_table\nDISABLE CONSTRAINT fk_name;\n")),(0,l.kt)("h3",{id:"enable-a-foreign-constraint"},"Enable a foreign constraint"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE child_table\nENABLE CONSTRAINT fk_name;\n")),(0,l.kt)("h2",{id:"not-null-constraint"},"NOT NULL constraint"),(0,l.kt)("h2",{id:"check-constraint"},"CHECK constraint"),(0,l.kt)("p",null,"An Oracle check constraint allows you to enforce domain integrity by limiting the values accepted by one or more columns."),(0,l.kt)("h3",{id:"creating-oracle-check"},"Creating Oracle Check"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE parts (\n    part_id NUMBER GENERATED BY DEFAULT AS IDENTITY,\n    part_name VARCHAR2(255) NOT NULL,\n    buy_price NUMBER(9,2) CHECK(buy_price > 0),\n    PRIMARY KEY(part_id)\n);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"DROP TABLE parts;\n\nCREATE TABLE parts (\n    part_id NUMBER GENERATED BY DEFAULT AS IDENTITY,\n    part_name VARCHAR2(255) NOT NULL,\n    buy_price NUMBER(9,2) CONSTRAINT check_positive_buy_price CHECK(buy_price > 0),\n    PRIMARY KEY(part_id)\n);\n")),(0,l.kt)("h3",{id:"add-check-constraint-to-a-table"},"Add Check constraint to a table"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE parts\nADD CONSTRAINT check_positive_cost CHECK (cost > 0);\n")),(0,l.kt)("h3",{id:"drop-checking-constraint"},"Drop checking constraint"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE parts\nDROP CONSTRAINT check_valid_cost;\n")),(0,l.kt)("h3",{id:"disable--enable-check-constraint"},"Disable / Enable check constraint"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE table_name\nDISABLE CONSTRAINT check_constraint_name;\n\nALTER TABLE table_name\nENABLE CONSTRAINT check_constraint_name;\n")),(0,l.kt)("h3",{id:"restrictions-of-oracle-check-constraint"},"Restrictions of Oracle check constraint"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"You can define check constraints for tables only, not views."),(0,l.kt)("li",{parentName:"ul"},"The expression of the check constraint can refer to any column in the table, but it cannot refer to columns of other tables."),(0,l.kt)("li",{parentName:"ul"},"The expression also cannot contain one of the following constructs:"),(0,l.kt)("li",{parentName:"ul"},"Non-deterministic functions such as SYSDATE, CURRENT_DATE, and CURRENT_TIMESTAMP."),(0,l.kt)("li",{parentName:"ul"},"Subqueries or a scalar subquery expressions."),(0,l.kt)("li",{parentName:"ul"},"Calls to any user-defined functions."),(0,l.kt)("li",{parentName:"ul"},"Nested table columns or attributes."),(0,l.kt)("li",{parentName:"ul"},"The pseudo-columns CURRVAL, NEXTVAL, LEVEL, or ROWNUM."),(0,l.kt)("li",{parentName:"ul"},"Date constants that are not fully specified.")),(0,l.kt)("h2",{id:"unique-constraint"},"UNIQUE constraint"),(0,l.kt)("p",null,"A unique constraint is an integrity constraint that ensures the data stored in a column, or a group of columns, is unique among the rows in a table."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE table_name (\n    ...\n    column_name data_type UNIQUE\n    ...\n);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE table_name (\n    ...,\n    UNIQUE(column_name)\n);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE table_name (\n    ...\n    column_name data_type CONSTRAINT unique_constraint_name UNIQUE\n    ...\n);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE table_name (\n    ...\n    column_name data_type,\n    ...,\n    CONSTRAINT unique_constraint_name UNIQUE(column_name)\n);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE table_name (\n    ...\n    column_name1 data_type,\n    column_name2 data_type,\n    ...,\n    CONSTRAINT unique_constraint_name UNIQUE(column_name1, column_name2)\n);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE table_name\nADD CONSTRAINT unique_constraint_name UNIQUE(column_name1, column_nam2);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE table_name\nDISABLE CONSTRAINT unique_constraint_name;\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE table_name\nENABLE CONSTRAINT unique_constraint_name;\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE table_name\nDROP CONSTRAINT unique_constraint_name;\n")))}d.isMDXComponent=!0}}]);